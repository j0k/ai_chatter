# 📊 AI Chatter v0.2.4 - Context Size Monitoring

## 🎯 **What's New in v0.2.4**

**AI-Chatter v0.2.4** introduces a smart monitoring feature: **context size detection and monitoring directly from Telegram**! Now you can use `/context_size` to check your Cursor AI context usage (like the 85.4% you saw in the interface) and get detailed information, warnings, and tips sent right to your Telegram chat.

## ✨ **New Features**

### 📊 **Context Size Monitoring**
- **Smart Detection**: Automatically detects context size in Cursor AI chat interfaces
- **Pattern Recognition**: Finds percentage values like 85.4%, 70.4%, etc.
- **Real-time Updates**: Live monitoring of context usage changes
- **Multiple Sources**: Detects from various interface elements

### 📱 **Context Size Command**
- **Simple Command**: `/context_size` for instant status check
- **Instant Response**: Get context information immediately
- **Beautiful Formatting**: Markdown-formatted results with emojis
- **Usage Visualization**: Visual usage bar and percentage indicators

### 🎯 **Intelligent Detection**
- **Cursor AI Interface**: Detects context size from chat tabs
- **Webview Content**: Finds context information in webview panels
- **Pattern Matching**: Recognizes various context size formats
- **Source Tracking**: Identifies where context size was detected

### 📈 **Usage Analytics**
- **Percentage Display**: Shows exact context usage (e.g., 85.4%)
- **Visual Indicators**: Color-coded usage levels (🟢 Low, 🟡 Moderate, ⚠️ High)
- **Usage Bar**: Visual representation of context fullness
- **Smart Warnings**: Alerts for high usage (80%+)

## 🔍 **How It Works**

### **Detection Flow**
```
📱 User sends: /context_size
    ↓
🤖 Bot triggers context size detection
    ↓
🔍 System scans active chat interfaces
    ↓
📊 Pattern recognition finds percentage values
    ↓
📱 Formatted results sent to Telegram
```

### **Pattern Recognition**
The system automatically detects context size from:
- **Percentage Values**: 85.4%, 70.4%, 95.2%
- **Context Indicators**: "Context: 85.4%", "Size: 70.4%"
- **Usage Patterns**: "85.4% used", "70.4% full"
- **Interface Elements**: Cursor AI chat tabs and webviews

### **Smart Source Detection**
1. **Content Patterns**: Scans chat content for percentage values
2. **Document Metadata**: Checks document properties and metadata
3. **Webview Content**: Analyzes webview panel content
4. **Cursor AI Interface**: Specifically looks for Cursor AI indicators

## 🚀 **Usage Guide**

### **1. Basic Command**
```
/context_size
```

**Response Example:**
```
📊 Context Size Information

Current Usage: 85.4%
Source: cursor_ai_interface
Detected: 8/27/2025, 12:34:56 PM

⚠️ High Usage Warning
Your context is 85.4% full. Consider clearing some context or starting a new chat.

Usage Bar:
████████████████░░░░ 85.4%

💡 Tips:
• Start a new chat to reset context
• Remove unnecessary files from context
• Clear chat history if possible
```

### **2. When to Use**
- **Before adding files**: Check if you have room for more context
- **During long conversations**: Monitor usage as you chat
- **Before important tasks**: Ensure you have enough context space
- **Regular monitoring**: Keep track of context usage

### **3. Understanding the Response**
- **Current Usage**: Exact percentage of context used
- **Source**: Where the context size was detected
- **Detected**: When the information was last updated
- **Usage Bar**: Visual representation of context fullness
- **Tips**: Contextual advice based on usage level

## 🎨 **Response Formatting**

### **Usage Level Indicators**

#### **🟢 Low Usage (0-59%)**
- **Status**: "Low Usage"
- **Message**: "Your context is only X% full. Plenty of room for more conversation!"
- **Tips**: Continue chatting, add more files

#### **🟡 Moderate Usage (60-79%)**
- **Status**: "Moderate Usage"
- **Message**: "Your context is X% full. You still have room for more conversation."
- **Tips**: Monitor usage, continue with caution

#### **⚠️ High Usage (80%+)**
- **Status**: "High Usage Warning"
- **Message**: "Your context is X% full. Consider clearing some context or starting a new chat."
- **Tips**: Clear context, start new chat, remove files

### **Visual Elements**
- **Usage Bar**: `████████████████░░░░ 85.4%`
- **Emojis**: 📊 for info, ⚠️ for warnings, 💡 for tips
- **Markdown**: Bold headers, code formatting for usage bar
- **Color Coding**: Green (low), Yellow (moderate), Red (high)

## 🔧 **Technical Implementation**

### **Components**
- **`ContextSizeHandler`**: Core context size detection engine
- **Enhanced `TelegramBotManager`**: Handles `/context_size` commands
- **Pattern Recognition**: Multiple regex patterns for detection
- **Source Tracking**: Identifies detection method and source

### **Detection Methods**
1. **Content Pattern Matching**: Regex patterns for percentage values
2. **Document Analysis**: Checks file names and metadata
3. **Webview Scanning**: Analyzes webview panel content
4. **Cursor AI Detection**: Specific patterns for Cursor AI interface

### **Pattern Recognition**
```typescript
// Percentage patterns
/(\d+\.?\d*)%/g                    // 85.4%
/(?:context|size|usage)\s*:\s*(\d+\.?\d*)%/gi  // Context: 85.4%
/(\d+\.?\d*)%\s*(?:used|full|occupied|consumed)/gi  // 85.4% used
/context\s*size\s*:\s*(\d+\.?\d*)%/gi  // Context size: 85.4%
```

## 📱 **Example Workflows**

### **Scenario 1: Before Adding Files**
```
📱 You: /context_size
🤖 Bot: 📊 Context Size Information

Current Usage: 45.2%
Source: cursor_ai_interface
Detected: 8/27/2025, 12:30:15 PM

🟢 Low Usage
Your context is only 45.2% full. Plenty of room for more conversation!

Usage Bar:
████████░░░░░░░░░░░░ 45.2%

💡 Tips:
• You have plenty of context space
• Feel free to add more files or continue chatting
```

### **Scenario 2: During Long Conversation**
```
📱 You: /context_size
🤖 Bot: 📊 Context Size Information

Current Usage: 78.6%
Source: cursor_ai_interface
Detected: 8/27/2025, 12:45:22 PM

🟡 Moderate Usage
Your context is 78.6% full. You still have room for more conversation.

Usage Bar:
██████████████████░░ 78.6%

💡 Tips:
• You can continue the conversation
• Monitor usage as you chat
```

### **Scenario 3: High Usage Warning**
```
📱 You: /context_size
🤖 Bot: 📊 Context Size Information

Current Usage: 92.1%
Source: cursor_ai_interface
Detected: 8/27/2025, 12:50:33 PM

⚠️ High Usage Warning
Your context is 92.1% full. Consider clearing some context or starting a new chat.

Usage Bar:
████████████████████ 92.1%

💡 Tips:
• Start a new chat to reset context
• Remove unnecessary files from context
• Clear chat history if possible
```

## ⚙️ **Configuration & Settings**

### **Automatic Detection**
- **Enabled by default**: No setup required
- **Real-time monitoring**: Detects changes automatically
- **Multiple sources**: Tries various detection methods
- **Fallback handling**: Graceful degradation if detection fails

### **Detection Settings**
- **Pattern matching**: Multiple regex patterns for accuracy
- **Source priority**: Cursor AI interface first, then others
- **Update frequency**: Detects on document/editor changes
- **Error handling**: Logs detection issues for debugging

## 🔮 **Future Enhancements**

### **v0.3.0** (Planned)
- **Context History**: Track context size changes over time
- **Usage Analytics**: Detailed usage statistics and trends
- **Auto-warnings**: Automatic alerts at certain usage levels
- **Context Management**: Commands to clear or manage context

### **v0.4.0** (Future)
- **Predictive Analysis**: Estimate when context will be full
- **Smart Recommendations**: AI-powered context optimization tips
- **Context Backup**: Save and restore context states
- **Team Monitoring**: Track context usage across team members

## 🧪 **Testing the Feature**

### **Prerequisites**
1. **AI-Chatter v0.2.4** installed and configured
2. **Bot running** and connected to Telegram
3. **Cursor AI chat tab** open with context size visible
4. **Context size information** displayed in the interface

### **Test Steps**
1. **Open Cursor AI chat** with context size visible (like 85.4%)
2. **Send command**: `/context_size` from Telegram
3. **Check response**: Should show context size information
4. **Verify accuracy**: Percentage should match interface display
5. **Test different levels**: Try with various context usage levels

### **Expected Results**
- **Low usage (0-59%)**: Green indicator with encouraging tips
- **Moderate usage (60-79%)**: Yellow indicator with monitoring advice
- **High usage (80%+)**: Red warning with optimization tips
- **No context size**: Clear message explaining what to check

## ⚠️ **Important Notes**

### **Detection Requirements**
- **Cursor AI interface**: Must be in a Cursor AI chat tab
- **Visible context size**: Context percentage must be displayed
- **Active monitoring**: System continuously scans for changes
- **Real-time updates**: Detects changes as they happen

### **Limitations**
- **Interface dependent**: Requires Cursor AI to display context size
- **Pattern based**: Relies on recognizable percentage formats
- **Source specific**: Works best with Cursor AI chat interfaces
- **Update frequency**: Depends on document/interface changes

## 🎉 **What This Means for You**

### **Before v0.2.4**
- ❌ Had to manually check context size in interface
- ❌ No remote monitoring of context usage
- ❌ No warnings about high context usage
- ❌ Limited context management capabilities

### **After v0.2.4**
- ✅ **Remote context monitoring** from anywhere
- ✅ **Instant context size checks** via Telegram
- ✅ **Smart usage warnings** and recommendations
- ✅ **Visual usage indicators** and progress bars
- ✅ **Contextual tips** based on usage level

## 🚀 **Ready for Smart Context Monitoring?**

The AI-Chatter now provides **complete context size monitoring from Telegram**! You can:

- **📊 Check context usage** instantly with `/context_size`
- **📱 Get detailed information** with beautiful formatting
- **⚠️ Receive warnings** when context usage is high
- **💡 Get smart tips** for context management
- **📈 Visualize usage** with progress bars and indicators

**Perfect for:**
- **Remote Development**: Monitor context from anywhere
- **Context Management**: Know when to clear or optimize
- **Usage Planning**: Plan file additions and conversations
- **Performance Monitoring**: Track context efficiency
- **Team Collaboration**: Share context status with team

**Install v0.2.4 and experience the most intelligent AI-Chatter yet!** 🎯

---

**🌐 GitHub Repository**: [https://github.com/j0k/ai_chatter](https://github.com/j0k/ai_chatter)
**📚 Full Documentation**: [README.md](README.md)
**🔧 Installation Guide**: [INSTALL.md](INSTALL.md)
**🎯 v0.2.0 Features**: [V0.2.0_FEATURES.md](V0.2.0_FEATURES.md)
**🔄 Two-Way Communication**: [TWO_WAY_COMMUNICATION.md](TWO_WAY_COMMUNICATION.md)
**🖥️ Terminal Commands**: [V0.2.3_TERMINAL_COMMANDS.md](V0.2.3_TERMINAL_COMMANDS.md)
**📊 Context Size Monitoring**: This document
